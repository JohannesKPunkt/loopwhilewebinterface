<div id="editor_container">
    <pre id="editor">$program_code</pre>
    <!-- load ace -->
    <script src="ace/ace.js"></script>
    <!-- load ace themelist extension -->
    <script src="ace/ext-themelist.js"></script>
    <!-- load ace language_tools extension -->
    <script src="ace/ext-language_tools.js"></script>
    <script>
    //<![CDATA[
    var session_id = 0;

    var $ = document.getElementById.bind(document);
    var dom = require("ace/lib/dom");

    ace.config.set("enableBasicAutocompletion", true);

    //add command to all new editor instances
    require("ace/commands/default_commands").commands.push({
        name: "Toggle Fullscreen",
        bindKey: "F11",
        exec: function(editor) {
            var fullScreen = dom.toggleCssClass(document.body, "fullScreen")
            dom.setCssClass(editor.container, "fullScreen", fullScreen)
            editor.setAutoScrollEditorIntoView(!fullScreen)
            editor.resize()
        }
    });

    // create first editor
    var editor = ace.edit("editor");//, document.getElementById("editor_container"));
    editor.setTheme("ace/theme/twilight");
    editor.session.setMode("ace/mode/LoopWhile");
    editor.renderer.setScrollMargin(10, 10);
    editor.setOptions({
        // "scrollPastEnd": 0.8,
        autoScrollEditorIntoView: true
    });


    var count = 1;

    var themes = require("ace/ext/themelist").themes.map(function(t){return t.theme});

    window.add = add;
    window.scroll = scroll;
    //]]>
    </script>
</div>
